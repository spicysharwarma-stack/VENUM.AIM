-- Crown Hub 2026 - Fixed Gradients & QuizBot Added
-- Enhanced Version

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")

local player = Players.LocalPlayer
local mouse = player:GetMouse()

-- GUI Setup
local CrownHub = Instance.new("ScreenGui")
CrownHub.Name = "CrownHubRoyal"
CrownHub.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
CrownHub.DisplayOrder = 999
CrownHub.ResetOnSpawn = false
CrownHub.Parent = player:WaitForChild("PlayerGui")

-- Main Container
local MainContainer = Instance.new("Frame")
MainContainer.Size = UDim2.new(0, 450, 0, 520)
MainContainer.Position = UDim2.new(0.5, -225, 0.5, -260)
MainContainer.BackgroundColor3 = Color3.fromRGB(15, 12, 18)
MainContainer.BackgroundTransparency = 0.05
MainContainer.BorderSizePixel = 0
MainContainer.ClipsDescendants = true
MainContainer.Parent = CrownHub

-- FIXED: Proper Gradient Background
local GradientBackground = Instance.new("Frame")
GradientBackground.Size = UDim2.new(1, 0, 1, 0)
GradientBackground.Position = UDim2.new(0, 0, 0, 0)
GradientBackground.BackgroundColor3 = Color3.fromRGB(25, 20, 30)
GradientBackground.BorderSizePixel = 0
GradientBackground.ZIndex = 0
GradientBackground.Parent = MainContainer

local MainGradient = Instance.new("UIGradient")
MainGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(40, 25, 50)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(60, 35, 80)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(30, 20, 40))
})
MainGradient.Rotation = 45
MainGradient.Parent = GradientBackground

-- FIXED: Better Moving Overlay
local MovingOverlay = Instance.new("Frame")
MovingOverlay.Size = UDim2.new(2, 0, 2, 0)
MovingOverlay.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
MovingOverlay.BackgroundTransparency = 0.9
MovingOverlay.BorderSizePixel = 0
MovingOverlay.ZIndex = 1
MovingOverlay.Parent = MainContainer

local OverlayGradient = Instance.new("UIGradient")
OverlayGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(120, 80, 160)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(80, 120, 200)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(160, 100, 120))
})
OverlayGradient.Transparency = NumberSequence.new({
    NumberSequenceKeypoint.new(0, 0.8),
    NumberSequenceKeypoint.new(0.5, 0.6),
    NumberSequenceKeypoint.new(1, 0.8)
})
OverlayGradient.Parent = MovingOverlay

-- FIXED: Smooth Gradient Animation
spawn(function()
    local time = 0
    while CrownHub.Parent do
        time = time + 0.02
        
        -- Move overlay smoothly across the screen
        local x = math.sin(time * 0.5) * 0.3
        local y = math.cos(time * 0.3) * 0.3
        MovingOverlay.Position = UDim2.new(x, 0, y, 0)
        
        -- Rotate gradients for flowing effect
        MainGradient.Rotation = (MainGradient.Rotation + 0.2) % 360
        OverlayGradient.Rotation = (OverlayGradient.Rotation - 0.3) % 360
        
        RunService.Heartbeat:Wait()
    end
end)

-- Gold Border
local GoldBorder = Instance.new("Frame")
GoldBorder.Size = UDim2.new(1, 6, 1, 6)
GoldBorder.Position = UDim2.new(0, -3, 0, -3)
GoldBorder.BackgroundColor3 = Color3.fromRGB(212, 175, 55)
GoldBorder.BackgroundTransparency = 0.3
GoldBorder.BorderSizePixel = 0
GoldBorder.ZIndex = -1
GoldBorder.Parent = MainContainer

-- Border Animation
spawn(function()
    while CrownHub.Parent do
        TweenService:Create(GoldBorder, TweenInfo.new(2), {
            BackgroundTransparency = 0.1,
            BackgroundColor3 = Color3.fromRGB(255, 215, 0)
        }):Play()
        wait(2)
        TweenService:Create(GoldBorder, TweenInfo.new(2), {
            BackgroundTransparency = 0.3,
            BackgroundColor3 = Color3.fromRGB(212, 175, 55)
        }):Play()
        wait(2)
    end
end)

-- Glass Overlay
local GlassLayer = Instance.new("Frame")
GlassLayer.Size = UDim2.new(1, 0, 1, 0)
GlassLayer.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
GlassLayer.BackgroundTransparency = 0.95
GlassLayer.BorderSizePixel = 0
GlassLayer.ZIndex = 2
GlassLayer.Parent = MainContainer

-- Corner Radius
local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 12)
Corner.Parent = MainContainer

local BorderCorner = Instance.new("UICorner")
BorderCorner.CornerRadius = UDim.new(0, 16)
BorderCorner.Parent = GoldBorder

-- Header
local Header = Instance.new("Frame")
Header.Size = UDim2.new(1, 0, 0, 70)
Header.BackgroundColor3 = Color3.fromRGB(25, 20, 30)
Header.BackgroundTransparency = 0.1
Header.BorderSizePixel = 0
Header.ZIndex = 10
Header.Parent = MainContainer

-- FIXED: Better Header Gradient
local HeaderGradient = Instance.new("UIGradient")
HeaderGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(50, 30, 70)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(35, 20, 50))
})
HeaderGradient.Rotation = 90
HeaderGradient.Parent = Header

-- Crown Icon
local CrownIcon = Instance.new("ImageLabel")
CrownIcon.Size = UDim2.new(0, 40, 0, 40)
CrownIcon.Position = UDim2.new(0, 15, 0, 15)
CrownIcon.BackgroundTransparency = 1
CrownIcon.Image = "rbxassetid://6031075938"
CrownIcon.ImageColor3 = Color3.fromRGB(255, 215, 0)
CrownIcon.ZIndex = 11
CrownIcon.Parent = Header

-- Crown Animation
spawn(function()
    while CrownHub.Parent do
        TweenService:Create(CrownIcon, TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
            Rotation = 5,
            ImageColor3 = Color3.fromRGB(255, 230, 100)
        }):Play()
        wait(1.5)
        TweenService:Create(CrownIcon, TweenInfo.new(1.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
            Rotation = -5,
            ImageColor3 = Color3.fromRGB(255, 215, 0)
        }):Play()
        wait(1.5)
    end
end)

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -80, 0, 35)
Title.Position = UDim2.new(0, 65, 0, 8)
Title.BackgroundTransparency = 1
Title.Text = "CROWN HUB"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 24
Title.Font = Enum.Font.GothamBlack
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.TextStrokeColor3 = Color3.fromRGB(255, 215, 0)
Title.TextStrokeTransparency = 0.7
Title.ZIndex = 11
Title.Parent = Header

local Subtitle = Instance.new("TextLabel")
Subtitle.Size = UDim2.new(1, -80, 0, 20)
Subtitle.Position = UDim2.new(0, 65, 0, 40)
Subtitle.BackgroundTransparency = 1
Subtitle.Text = "Enhanced with Aurora"
Subtitle.TextColor3 = Color3.fromRGB(200, 180, 255)
Subtitle.TextSize = 11
Subtitle.Font = Enum.Font.GothamMedium
Subtitle.TextXAlignment = Enum.TextXAlignment.Left
Subtitle.ZIndex = 11
Subtitle.Parent = Header

-- Control Buttons
local ControlContainer = Instance.new("Frame")
ControlContainer.Size = UDim2.new(0, 70, 0, 30)
ControlContainer.Position = UDim2.new(1, -75, 0, 20)
ControlContainer.BackgroundTransparency = 1
ControlContainer.ZIndex = 11
ControlContainer.Parent = Header

local MinimizeButton = Instance.new("TextButton")
MinimizeButton.Size = UDim2.new(0, 30, 0, 30)
MinimizeButton.Position = UDim2.new(0, 0, 0, 0)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(212, 175, 55)
MinimizeButton.BackgroundTransparency = 0.2
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.new(1, 1, 1)
MinimizeButton.TextSize = 16
MinimizeButton.Font = Enum.Font.GothamBlack
MinimizeButton.ZIndex = 11
MinimizeButton.Parent = ControlContainer

local MinimizeCorner = Instance.new("UICorner")
MinimizeCorner.CornerRadius = UDim.new(0, 6)
MinimizeCorner.Parent = MinimizeButton

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(0, 35, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(180, 60, 60)
CloseButton.BackgroundTransparency = 0.2
CloseButton.Text = "Ã—"
CloseButton.TextColor3 = Color3.new(1, 1, 1)
CloseButton.TextSize = 18
CloseButton.Font = Enum.Font.GothamBlack
CloseButton.ZIndex = 11
CloseButton.Parent = ControlContainer

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 6)
CloseCorner.Parent = CloseButton

-- Navigation Tabs
local TabContainer = Instance.new("Frame")
TabContainer.Size = UDim2.new(1, -20, 0, 32)
TabContainer.Position = UDim2.new(0, 10, 0, 80)
TabContainer.BackgroundTransparency = 1
TabContainer.ZIndex = 10
TabContainer.Parent = MainContainer

-- Content Area
local ContentFrame = Instance.new("ScrollingFrame")
ContentFrame.Size = UDim2.new(1, -20, 1, -122)
ContentFrame.Position = UDim2.new(0, 10, 0, 122)
ContentFrame.BackgroundTransparency = 1
ContentFrame.ScrollBarThickness = 4
ContentFrame.ScrollBarImageColor3 = Color3.fromRGB(212, 175, 55)
ContentFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
ContentFrame.ZIndex = 10
ContentFrame.Parent = MainContainer

local ContentLayout = Instance.new("UIListLayout")
ContentLayout.Padding = UDim.new(0, 10)
ContentLayout.Parent = ContentFrame

-- Tabs
local Tabs = {
    "Fling",
    "Admin", 
    "Movement",
    "Visual",
    "Combat",
    "Hubs"
}

local CurrentTab = "Fling"

-- Create Tabs
for i, tabName in ipairs(Tabs) do
    local TabButton = Instance.new("TextButton")
    TabButton.Size = UDim2.new(1/#Tabs, -4, 1, 0)
    TabButton.Position = UDim2.new((i-1)/#Tabs, 0, 0, 0)
    TabButton.BackgroundColor3 = Color3.fromRGB(35, 30, 45)
    TabButton.BackgroundTransparency = 0.3
    TabButton.Text = tabName
    TabButton.TextColor3 = Color3.fromRGB(200, 190, 220)
    TabButton.Font = Enum.Font.GothamMedium
    TabButton.TextSize = 11
    TabButton.AutoButtonColor = false
    TabButton.ZIndex = 11
    TabButton.Parent = TabContainer
    
    local TabCorner = Instance.new("UICorner")
    TabCorner.CornerRadius = UDim.new(0, 6)
    TabCorner.Parent = TabButton
    
    -- Tab Hover
    TabButton.MouseEnter:Connect(function()
        if TabButton.Text ~= CurrentTab then
            TweenService:Create(TabButton, TweenInfo.new(0.3), {
                BackgroundTransparency = 0.1,
                TextColor3 = Color3.fromRGB(255, 255, 255)
            }):Play()
        end
    end)
    
    TabButton.MouseLeave:Connect(function()
        if TabButton.Text ~= CurrentTab then
            TweenService:Create(TabButton, TweenInfo.new(0.3), {
                BackgroundTransparency = 0.3,
                TextColor3 = Color3.fromRGB(200, 190, 220)
            }):Play()
        end
    end)
    
    TabButton.MouseButton1Click:Connect(function()
        CurrentTab = tabName
        UpdateContent()
        UpdateTabAppearance()
    end)
end

function UpdateTabAppearance()
    for _, tab in ipairs(TabContainer:GetChildren()) do
        if tab:IsA("TextButton") then
            if tab.Text == CurrentTab then
                TweenService:Create(tab, TweenInfo.new(0.3), {
                    BackgroundColor3 = Color3.fromRGB(212, 175, 55),
                    TextColor3 = Color3.fromRGB(20, 15, 25),
                    BackgroundTransparency = 0.1
                }):Play()
            else
                TweenService:Create(tab, TweenInfo.new(0.3), {
                    BackgroundColor3 = Color3.fromRGB(35, 30, 45),
                    TextColor3 = Color3.fromRGB(200, 190, 220),
                    BackgroundTransparency = 0.3
                }):Play()
            end
        end
    end
end

-- WORKING FLY SYSTEM
local FlyEnabled = false
local BodyGyro, BodyVelocity

local function ToggleFly()
    FlyEnabled = not FlyEnabled
    
    if FlyEnabled then
        if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local root = player.Character.HumanoidRootPart
            
            BodyGyro = Instance.new("BodyGyro")
            BodyGyro.P = 1000
            BodyGyro.D = 50
            BodyGyro.MaxTorque = Vector3.new(100000, 100000, 100000)
            BodyGyro.CFrame = root.CFrame
            BodyGyro.Parent = root
            
            BodyVelocity = Instance.new("BodyVelocity")
            BodyVelocity.Velocity = Vector3.new(0, 0, 0)
            BodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
            BodyVelocity.Parent = root
            
            local flyConnection
            flyConnection = RunService.Heartbeat:Connect(function()
                if not FlyEnabled or not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
                    flyConnection:Disconnect()
                    return
                end
                
                local root = player.Character.HumanoidRootPart
                local camera = workspace.CurrentCamera
                
                BodyGyro.CFrame = camera.CFrame
                
                local velocity = Vector3.new(0, 0, 0)
                local speed = 50
                
                if UserInputService:IsKeyDown(Enum.KeyCode.W) then
                    velocity = velocity + camera.CFrame.LookVector * speed
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.S) then
                    velocity = velocity - camera.CFrame.LookVector * speed
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.A) then
                    velocity = velocity - camera.CFrame.RightVector * speed
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.D) then
                    velocity = velocity + camera.CFrame.RightVector * speed
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.Space) then
                    velocity = velocity + Vector3.new(0, speed, 0)
                end
                if UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then
                    velocity = velocity - Vector3.new(0, speed, 0)
                end
                
                BodyVelocity.Velocity = velocity
            end)
        end
    else
        if BodyGyro then BodyGyro:Destroy() end
        if BodyVelocity then BodyVelocity:Destroy() end
    end
end

-- Collision System
local function EnableCollision()
    for _, target in ipairs(Players:GetPlayers()) do
        if target.Character then
            for _, part in pairs(target.Character:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.CanCollide = true
                end
            end
        end
    end
end

-- Orbit Fling
local OrbitalActive = false
local function GetNearestPlayer()
    local nearestPlayer = nil
    local shortestDistance = math.huge
    
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local playerRoot = player.Character.HumanoidRootPart
        
        for _, target in ipairs(Players:GetPlayers()) do
            if target ~= player and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
                local targetRoot = target.Character.HumanoidRootPart
                local distance = (playerRoot.Position - targetRoot.Position).Magnitude
                
                if distance < shortestDistance then
                    shortestDistance = distance
                    nearestPlayer = target
                end
            end
        end
    end
    
    return nearestPlayer
end

local function OrbitalFling()
    OrbitalActive = true
    if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then return end
    
    local root = player.Character.HumanoidRootPart
    
    spawn(function()
        while OrbitalActive and player.Character do
            local nearestTarget = GetNearestPlayer()
            
            if nearestTarget and nearestTarget.Character and nearestTarget.Character:FindFirstChild("HumanoidRootPart") then
                local targetRoot = nearestTarget.Character.HumanoidRootPart
                
                local angle = tick() * 8
                local radius = 6
                local orbitPosition = targetRoot.Position + Vector3.new(
                    math.cos(angle) * radius,
                    2,
                    math.sin(angle) * radius
                )
                
                root.CFrame = CFrame.new(orbitPosition)
                
                local flingBV = Instance.new("BodyVelocity")
                local flingDirection = (targetRoot.Position - root.Position).Unit
                flingBV.Velocity = flingDirection * 80 + Vector3.new(0, 60, 0)
                flingBV.MaxForce = Vector3.new(40000, 40000, 40000)
                flingBV.Parent = targetRoot
                game.Debris:AddItem(flingBV, 0.2)
            end
            
            RunService.Heartbeat:Wait()
        end
    end)
end

-- ORIGINAL FEATURE NAMES + QUIZBOT ADDED
local CrownFunctions = {
    ["Fling"] = {
        {"ðŸŒ€ Orbit Nearest", function()
            OrbitalActive = not OrbitalActive
            if OrbitalActive then
                OrbitalFling()
            end
        end},
        
        {"ðŸ”’ Enable Collision", function()
            EnableCollision()
        end},
        
        {"ðŸ›‘ Stop Fling", function()
            OrbitalActive = false
        end}
    },
    
    ["Admin"] = {
        {"ðŸ›¡ï¸ Nameless Admin", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/ltseverydayyou/Nameless-Admin/main/Source"))()
        end},
        
        {"âš¡ Infinite Yield", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
        end},
        
        {"ðŸ¤– QuizBot", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Damian-11/quizbot/master/quizbot.luau"))()
        end}
    },
    
    Movement = {
        {"ðŸš€ Fly (WASD+Space+Ctrl)", function()
            ToggleFly()
        end},
        
        {"âš¡ Speed (100)", function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.WalkSpeed = 100
            end
        end},
        
        {"ðŸ‘» Noclip", function()
            local noclip = false
            player.CharacterAdded:Connect(function(char)
                if noclip then
                    wait(0.5)
                    for _, part in pairs(char:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
            end)
            
            noclip = not noclip
            if player.Character then
                for _, part in pairs(player.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = not noclip
                    end
                end
            end
        end},
        
        {"ðŸ”„ Reset", function()
            if player.Character and player.Character:FindFirstChild("Humanoid") then
                player.Character.Humanoid.WalkSpeed = 16
            end
            ToggleFly()
        end}
    },
    
    Visual = {
        {"ðŸŽ¯ ESP", function()
            for _, target in ipairs(Players:GetPlayers()) do
                if target ~= player and target.Character then
                    local highlight = Instance.new("Highlight")
                    highlight.FillColor = Color3.fromRGB(255, 215, 0)
                    highlight.OutlineColor = Color3.fromRGB(255, 255, 255)
                    highlight.FillTransparency = 0.4
                    highlight.Parent = target.Character
                end
            end
        end},
        
        {"ðŸ‘ï¸ X-Ray", function()
            for _, part in pairs(workspace:GetDescendants()) do
                if part:IsA("BasePart") and part.Transparency < 1 then
                    part.LocalTransparencyModifier = 0.6
                end
            end
        end},
        
        {"ðŸŒŸ Full Bright", function()
            Lighting.Brightness = 2
            Lighting.Ambient = Color3.new(1, 1, 1)
        end},
        
        {"ðŸ—‘ï¸ Clear", function()
            for _, target in ipairs(Players:GetPlayers()) do
                if target.Character then
                    for _, highlight in ipairs(target.Character:GetChildren()) do
                        if highlight:IsA("Highlight") then
                            highlight:Destroy()
                        end
                    end
                end
            end
            for _, part in pairs(workspace:GetDescendants()) do
                if part:IsA("BasePart") then
                    part.LocalTransparencyModifier = 0
                end
            end
            Lighting.Brightness = 1
        end}
    },
    
    Combat = {
        {"ðŸŽ¯ Venum Aim", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/spicysharwarma-stack/VENUM.AIM/main/MAINCODE"))()
        end},
        
        {"âš¡ Aim Assist", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/RunDTM/ZeeroxHub/main/Loader.lua"))()
        end}
    },
    
    Hubs = {
        {"ðŸ”ª Slicer FE V8", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Ahma174/Slicer/refs/heads/main/Slicer%20Fe%20V8.0.0%20%5BBETA%5D.txt"))()
        end},
        
        {"ðŸŒ€ Gravity Trip", function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Rawbr10/Roblox-Scripts/refs/heads/main/0%20Graviy%20Trip%20Universal"))()
        end}
    }
}

function UpdateContent()
    for _, child in ipairs(ContentFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end
    
    local functions = CrownFunctions[CurrentTab] or {}
    
    for _, func in ipairs(functions) do
        CreateButton(func[1], func[2])
    end
end

function CreateButton(text, callback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 42)
    button.BackgroundColor3 = Color3.fromRGB(35, 30, 45)
    button.BackgroundTransparency = 0.2
    button.Text = text
    button.TextColor3 = Color3.fromRGB(240, 230, 255)
    button.Font = Enum.Font.GothamMedium
    button.TextSize = 13
    button.AutoButtonColor = false
    button.ZIndex = 11
    button.Parent = ContentFrame
    
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(0, 8)
    buttonCorner.Parent = button
    
    -- Button Hover
    button.MouseEnter:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.3), {
            BackgroundTransparency = 0.1,
            BackgroundColor3 = Color3.fromRGB(45, 40, 55),
            Size = UDim2.new(1, 5, 0, 45)
        }):Play()
    end)
    
    button.MouseLeave:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.3), {
            BackgroundTransparency = 0.2,
            BackgroundColor3 = Color3.fromRGB(35, 30, 45),
            Size = UDim2.new(1, 0, 0, 42)
        }):Play()
    end)
    
    button.MouseButton1Click:Connect(function()
        TweenService:Create(button, TweenInfo.new(0.1), {
            BackgroundColor3 = Color3.fromRGB(212, 175, 55),
            TextColor3 = Color3.fromRGB(20, 15, 25),
            Size = UDim2.new(1, -5, 0, 38)
        }):Play()
        wait(0.1)
        TweenService:Create(button, TweenInfo.new(0.3), {
            BackgroundColor3 = Color3.fromRGB(35, 30, 45),
            TextColor3 = Color3.fromRGB(240, 230, 255),
            Size = UDim2.new(1, 0, 0, 42)
        }):Play()
        
        pcall(callback)
    end)
end

-- Minimize
local Minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
    Minimized = not Minimized
    if Minimized then
        TweenService:Create(MainContainer, TweenInfo.new(0.3), {
            Size = UDim2.new(0, 450, 0, 70)
        }):Play()
        MinimizeButton.Text = "+"
    else
        TweenService:Create(MainContainer, TweenInfo.new(0.3), {
            Size = UDim2.new(0, 450, 0, 520)
        }):Play()
        MinimizeButton.Text = "_"
    end
end)

-- Control Button Hover
MinimizeButton.MouseEnter:Connect(function()
    TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0,
        Size = UDim2.new(0, 32, 0, 32)
    }):Play()
end)

MinimizeButton.MouseLeave:Connect(function()
    TweenService:Create(MinimizeButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0.2,
        Size = UDim2.new(0, 30, 0, 30)
    }):Play()
end)

CloseButton.MouseEnter:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0,
        Size = UDim2.new(0, 32, 0, 32)
    }):Play()
end)

CloseButton.MouseLeave:Connect(function()
    TweenService:Create(CloseButton, TweenInfo.new(0.2), {
        BackgroundTransparency = 0.2,
        Size = UDim2.new(0, 30, 0, 30)
    }):Play()
end)

-- Drag System
local dragging = false
local dragStart, startPos

Header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainContainer.Position
    end
end)

Header.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

Header.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement and dragging then
        local delta = input.Position - dragStart
        MainContainer.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Close
CloseButton.MouseButton1Click:Connect(function()
    TweenService:Create(MainContainer, TweenInfo.new(0.4), {
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0.5, 0, 0.5, 0),
        BackgroundTransparency = 1
    }):Play()
    wait(0.4)
    CrownHub:Destroy()
end)

-- Entrance Animation
MainContainer.Size = UDim2.new(0, 0, 0, 0)
MainContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
MainContainer.BackgroundTransparency = 1

wait(0.1)

TweenService:Create(MainContainer, TweenInfo.new(0.6, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    Size = UDim2.new(0, 450, 0, 520),
    Position = UDim2.new(0.5, -225, 0.5, -260),
    BackgroundTransparency = 0.05
}):Play()

-- Initialize
UpdateContent()
UpdateTabAppearance()

print("ðŸ‘‘ Crown Hub - Fixed & QuizBot Added")
print("ðŸŒˆ Fixed gradient animations - now smooth and visible")
print("ðŸ¤– QuizBot added to Admin tab")
print("ðŸŽ¨ Better visual effects throughout")
